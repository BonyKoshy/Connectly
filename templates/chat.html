{% extends 'base.html' %} {% block title %}Connectly Chat{% endblock %} {% block
body_attrs %}data-username="{{ session['user'] }}"{% endblock %} {% block
content %}
<div class="flex h-screen overflow-hidden bg-slate-900">
  <aside
    class="w-20 md:w-64 flex-shrink-0 bg-surface border-r border-slate-700 flex flex-col transition-all duration-300"
  >
    <div
      class="h-16 flex items-center justify-center md:justify-start md:px-6 border-b border-slate-700"
    >
      <img
        src="{{ url_for('static', filename='images/logo.webp') }}"
        alt="Logo"
        class="h-8 w-8"
      />
      <span class="ml-3 font-bold text-xl text-white hidden md:block"
        >Connectly</span
      >
    </div>

    <div class="flex-1 overflow-y-auto py-4 space-y-2">
      <a
        href="{{ url_for('main.index') }}"
        class="flex items-center px-4 py-3 text-slate-400 hover:bg-slate-700 hover:text-white transition-colors mx-2 rounded-lg group"
        title="Home"
      >
        <i class="bi bi-house-door text-xl"></i>
        <span class="ml-3 font-medium hidden md:block">Home</span>
        <span
          class="md:hidden absolute left-16 bg-slate-800 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity z-50"
          >Home</span
        >
      </a>

      <a
        href="{{ url_for('chat.chat_list') }}"
        class="flex items-center px-4 py-3 text-white bg-primary/20 text-primary mx-2 rounded-lg group"
        title="Chats"
      >
        <i class="bi bi-chat-dots text-xl"></i>
        <span class="ml-3 font-medium hidden md:block">Chats</span>
      </a>

      <a
        href="{{ url_for('main.groups') }}"
        class="flex items-center px-4 py-3 text-slate-400 hover:bg-slate-700 hover:text-white transition-colors mx-2 rounded-lg group"
        title="Groups"
      >
        <i class="bi bi-people text-xl"></i>
        <span class="ml-3 font-medium hidden md:block">Groups</span>
      </a>

      <a
        href="{{ url_for('main.filetransfer') }}"
        class="flex items-center px-4 py-3 text-slate-400 hover:bg-slate-700 hover:text-white transition-colors mx-2 rounded-lg group"
        title="Files"
      >
        <i class="bi bi-folder2-open text-xl"></i>
        <span class="ml-3 font-medium hidden md:block">Files</span>
      </a>
    </div>

    <div class="p-4 border-t border-slate-700">
      <div class="flex items-center gap-3">
        <div
          class="h-10 w-10 rounded-full bg-gradient-to-tr from-primary to-secondary flex items-center justify-center text-white font-bold text-lg"
        >
          {{ username[0]|upper }}
        </div>
        <div class="hidden md:block overflow-hidden">
          <p class="text-sm font-medium text-white truncate">{{ username }}</p>
          <a
            href="{{ url_for('auth.logout') }}"
            class="text-xs text-slate-400 hover:text-red-400 transition-colors"
            >Logout</a
          >
        </div>
        <a
          href="{{ url_for('auth.logout') }}"
          class="md:hidden ml-auto text-slate-400 hover:text-red-400"
        >
          <i class="bi bi-box-arrow-right text-xl"></i>
        </a>
      </div>
    </div>
  </aside>

  <main
    class="flex-1 flex flex-col min-w-0 bg-[url('/static/images/1bg.jpeg')] bg-repeat"
  >
    <header
      class="h-16 flex items-center justify-between px-6 bg-surface/95 backdrop-blur border-b border-slate-700 shadow-sm z-10"
    >
      <div class="flex items-center gap-4">
        <div
          class="h-10 w-10 rounded-full bg-slate-700 flex items-center justify-center text-slate-300"
        >
          <i class="bi bi-person text-xl"></i>
        </div>
        <div>
          <h2 class="text-white font-bold text-lg leading-tight" id="chat-name">
            {{ receiver_name }}
          </h2>
          <span class="flex items-center gap-1.5 text-xs text-green-400">
            <span class="h-2 w-2 rounded-full bg-green-400"></span> Online
          </span>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button
          class="p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-full transition-colors"
        >
          <i class="bi bi-telephone text-xl"></i>
        </button>
        <button
          class="p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-full transition-colors"
        >
          <i class="bi bi-three-dots-vertical text-xl"></i>
        </button>
      </div>
    </header>

    <div
      class="flex-1 overflow-y-auto p-4 md:p-6 space-y-4 scroll-smooth"
      id="messages-container"
    >
      <div class="flex justify-center my-4">
        <span
          class="px-3 py-1 bg-slate-800/80 text-slate-400 text-xs rounded-full border border-slate-700"
        >
          Messages are end-to-end encrypted
        </span>
      </div>

      <div
        id="toast"
        class="fixed top-20 right-5 transform translate-x-full transition-transform duration-300 bg-surface border border-slate-700 text-white px-4 py-3 rounded-lg shadow-xl flex items-center gap-3 z-50"
      >
        <i class="bi bi-info-circle-fill text-primary"></i>
        <span>User has joined the room</span>
      </div>
    </div>

    <footer class="p-4 bg-surface border-t border-slate-700">
      <div class="max-w-4xl mx-auto relative flex items-end gap-2">
        <input type="file" id="file" hidden />
        <button
          onclick="document.getElementById('file').click()"
          class="p-3 text-slate-400 hover:text-primary hover:bg-slate-700/50 rounded-full transition-colors mb-1"
          title="Attach File"
        >
          <i class="bi bi-plus-circle text-xl"></i>
        </button>

        <div
          class="flex-1 bg-slate-900 rounded-2xl border border-slate-600 focus-within:border-primary focus-within:ring-1 focus-within:ring-primary transition-all"
        >
          <input
            type="text"
            id="messageInput"
            class="w-full bg-transparent text-white px-4 py-3 focus:outline-none placeholder-slate-500 max-h-32"
            placeholder="Type a message..."
            autocomplete="off"
          />
        </div>

        <button
          id="sendButton"
          class="p-3 bg-primary text-white rounded-full hover:bg-indigo-600 shadow-lg shadow-indigo-500/30 transform active:scale-95 transition-all mb-1"
        >
          <i class="bi bi-send-fill text-lg pl-0.5"></i>
        </button>
      </div>
    </footer>
  </main>
</div>
{% endblock %} {% block scripts %}
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script
  type="module"
  src="{{ url_for('static', filename='js/chats.js') }}"
></script>
{% endblock %}
