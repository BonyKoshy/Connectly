<!DOCTYPE html>
<html lang="en" class="h-full bg-slate-900">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Connectly{% endblock %}</title>
    <meta
      name="description"
      content="{% block description %}Secure Real-Time Chat Platform{% endblock %}"
    />

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#6366f1", // Indigo 500
              secondary: "#a855f7", // Purple 500
              dark: "#0f172a", // Slate 900
              surface: "#1e293b", // Slate 800
            },
          },
        },
      };
    </script>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Inter", sans-serif;
      }
      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #1e293b;
      }
      ::-webkit-scrollbar-thumb {
        background: #475569;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #64748b;
      }

      .loader {
        border-top-color: #6366f1;
        -webkit-animation: spinner 1.5s linear infinite;
        animation: spinner 1.5s linear infinite;
      }
      @keyframes spinner {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
    {% block extra_css %}{% endblock %}
  </head>
  <body
    class="h-full text-slate-200 antialiased selection:bg-primary selection:text-white flex flex-col"
  >
    <div
      id="globalLoader"
      class="fixed inset-0 z-50 flex items-center justify-center bg-slate-900 transition-opacity duration-300"
    >
      <div
        class="loader ease-linear rounded-full border-4 border-t-4 border-slate-700 h-12 w-12 mb-4"
      ></div>
    </div>

    {% block navbar %}{% endblock %}

    <div
      class="fixed top-5 right-5 z-50 flex flex-col gap-2 w-full max-w-sm pointer-events-none"
    >
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %} {% for category, message in messages %}
      <div
        class="pointer-events-auto flex items-center w-full max-w-xs p-4 space-x-3 text-gray-200 bg-surface rounded-lg shadow-lg border border-slate-700 animate-fade-in-down"
        role="alert"
      >
        <div
          class="inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg 
                {{ 'bg-green-800 text-green-200' if category == 'success' else 'bg-red-800 text-red-200' }}"
        >
          <i
            class="bi {{ 'bi-check-lg' if category == 'success' else 'bi-exclamation-triangle-fill' }}"
          ></i>
        </div>
        <div class="ml-3 text-sm font-normal">{{ message }}</div>
      </div>
      {% endfor %} {% endif %} {% endwith %}
    </div>

    {% block content %}{% endblock %}

    <script>
      window.addEventListener("load", () => {
        const loader = document.getElementById("globalLoader");
        loader.style.opacity = "0";
        setTimeout(() => (loader.style.display = "none"), 300);
      });
    </script>
    {% block scripts %}{% endblock %}
  </body>
</html>
